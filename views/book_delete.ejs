<%- include("layout.ejs") %>

<div>
  <h1><%= title %></h1>
<h4><%= book.title %></h4>
<p>
  <strong>Author: </strong>
  <a href="<%= book.author.url %>"><%= book.author.name%></a>
</p>
<p>
  <strong>Genre: </strong>
  <% if(book.genre.length > 0) { %>
  <% book.genre.forEach((genre, index) => { %>
  <a href="<%= genre.url %>">
    <%= genre.name %>
    <% if(index < book.genre.length - 1) {%>, <%} %>
  </a>
  <% }) %> <%} else {%>
<p>Not genres found</p>
<% } %>
</p>
<% if(bookinstances.length > 0 ) {%>
<p><strong>Delete the following instances before attempting to delete this book.</strong></p>
<div style="margin-left:20px;margin-top:20px">
  <h5><strong>Book Instances</strong></h5>
  <dl>
    <% for(const instance of bookinstances) { %>
    <dt>
      <p>Id: <a href="<%= instance.url %>"><%= instance.id %></a></p>

    </dt>
    <% } %>
  </dl>
</div>
<% } else { %>
<p>Do you really want to delete this Book?</p>
<form method="POST" action="">
  <div class="form-group">
    <input type="hidden" name="bookid" required="true" value="<%= book._id %>" id="bookid" class="form-control">
    <button class="btn btn-primary" type="submit">Delete</button>
  </div>
</form>
<% } %>
</div>